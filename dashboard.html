<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - GH Consulting</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #000; color: #fff; min-height: 100vh; }
        .app { display: flex; min-height: 100vh; }
        
        .sidebar { width: 200px; background: #000; border-right: 1px solid #1a1a1a; padding: 24px 16px; position: fixed; height: 100vh; display: flex; flex-direction: column; }
        .logo { font-size: 10px; font-weight: 600; letter-spacing: 2px; color: #666; margin-bottom: 40px; }
        .nav-label { font-size: 10px; font-weight: 500; color: #444; text-transform: uppercase; letter-spacing: 1px; margin: 20px 0 12px; }
        .nav-item { display: block; padding: 10px 12px; color: #666; font-size: 13px; cursor: pointer; transition: all 0.15s; border-radius: 4px; margin-bottom: 2px; }
        .nav-item:hover { color: #fff; background: #111; }
        .nav-item.active { color: #fff; background: #111; }
        .nav-item.highlight { color: #4ade80; }
        .sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid #1a1a1a; }
        .user-avatar { width: 32px; height: 32px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 11px; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-name { font-size: 12px; font-weight: 500; }
        .user-email { font-size: 10px; color: #666; }
        
        .main { flex: 1; margin-left: 200px; padding: 32px; max-width: 1100px; }
        
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; padding-bottom: 24px; border-bottom: 1px solid #1a1a1a; }
        .page-header h1 { font-size: 20px; font-weight: 400; }
        .page-header p { color: #666; font-size: 13px; margin-top: 4px; }
        
        .btn { padding: 10px 16px; font-size: 12px; font-weight: 500; cursor: pointer; border: 1px solid #333; background: transparent; color: #fff; font-family: inherit; }
        .btn:hover { border-color: #666; }
        .btn-primary { background: #fff; color: #000; border-color: #fff; }
        .btn-success { background: #4ade80; color: #000; border-color: #4ade80; }
        
        .alert { padding: 16px 20px; border: 1px solid #4ade80; background: rgba(74,222,128,0.1); margin-bottom: 24px; display: flex; align-items: center; justify-content: space-between; font-size: 13px; }
        .alert strong { color: #4ade80; }
        
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
        .stat { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 20px; }
        .stat-label { font-size: 10px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .stat-value { font-size: 28px; font-weight: 300; }
        .stat-sub { font-size: 11px; color: #666; margin-top: 4px; }
        
        .grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 24px; }
        .card { border: 1px solid #1a1a1a; padding: 20px; margin-bottom: 20px; background: #0a0a0a; }
        .card-title { font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid #1a1a1a; }
        
        .progress-row { margin-bottom: 20px; }
        .progress-header { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 8px; }
        .progress-header span:last-child { color: #666; }
        .progress-bar { height: 4px; background: #1a1a1a; border-radius: 2px; }
        .progress-fill { height: 100%; background: #4ade80; border-radius: 2px; }
        
        .link-item { display: flex; align-items: center; gap: 12px; padding: 14px; border: 1px solid #1a1a1a; margin-bottom: 8px; cursor: pointer; transition: all 0.15s; text-decoration: none; color: #fff; }
        .link-item:hover { border-color: #333; background: #111; }
        .link-icon { width: 36px; height: 36px; background: #1a1a1a; display: flex; align-items: center; justify-content: center; font-size: 16px; border-radius: 4px; }
        .link-title { font-size: 13px; }
        .link-desc { font-size: 11px; color: #666; margin-top: 2px; }
        
        .problem { padding: 16px; border: 1px solid #1a1a1a; margin-bottom: 12px; background: #050505; }
        .problem-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .problem-title { font-size: 13px; font-weight: 500; }
        .problem-date { font-size: 10px; color: #666; }
        .problem-text { font-size: 12px; color: #888; line-height: 1.5; }
        .problem-status { font-size: 10px; padding: 3px 8px; border-radius: 3px; margin-top: 10px; display: inline-block; }
        .problem-status.open { background: rgba(248,113,113,0.2); color: #f87171; }
        .problem-status.resolved { background: rgba(74,222,128,0.2); color: #4ade80; }
        
        .week-row { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #1a1a1a; font-size: 13px; }
        .week-row:last-child { border-bottom: none; }
        .week-date { width: 80px; color: #666; }
        .week-metric { flex: 1; text-align: center; }
        
        .form-group { margin-bottom: 20px; }
        .form-label { font-size: 11px; color: #888; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; display: block; }
        .form-input { width: 100%; padding: 12px; background: #111; border: 1px solid #222; color: #fff; font-size: 14px; font-family: inherit; }
        .form-input:focus { outline: none; border-color: #444; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        textarea.form-input { min-height: 80px; resize: vertical; }
        
        .page { display: none; }
        .page.active { display: block; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 24px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto; }
        .modal-title { font-size: 16px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #1a1a1a; }
        
        .empty { text-align: center; padding: 40px; color: #666; }
        
        .config-item { display: flex; align-items: center; gap: 12px; padding: 12px; border: 1px solid #1a1a1a; margin-bottom: 8px; }
        .config-item input { flex: 1; }
        
        @media (max-width: 900px) { .stats { grid-template-columns: repeat(2, 1fr); } .grid { grid-template-columns: 1fr; } }
        @media (max-width: 600px) { .sidebar { display: none; } .main { margin-left: 0; padding: 20px; } .stats { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <div class="logo">GH CONSULTING</div>
            <div class="nav-label">Principal</div>
            <div class="nav-item active" onclick="showPage('dashboard')">Dashboard</div>
            <div class="nav-item" onclick="showPage('metricas')">Historial</div>
            <div class="nav-label">Semanal</div>
            <div class="nav-item highlight" onclick="showPage('reporte')">üìù Reporte</div>
            <div class="nav-item" onclick="showPage('problemas')">Problemas</div>
            <div class="nav-label">Recursos</div>
            <div class="nav-item" onclick="showPage('links')">Mis Links</div>
            <div class="nav-item" onclick="showPage('config')">‚öôÔ∏è Configurar</div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="avatar">--</div>
                    <div>
                        <div class="user-name" id="userName">...</div>
                        <div class="user-email" id="userEmail">...</div>
                    </div>
                </div>
            </div>
        </aside>
        
        <main class="main" id="main"></main>
    </div>
    
    <!-- Modal Reporte -->
    <div class="modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-title">üìù Reporte Semanal</div>
            <form id="weeklyForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Ingresos esta semana (‚Ç¨)</label>
                        <input type="number" class="form-input" id="rpt_ingresos" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nuevos clientes</label>
                        <input type="number" class="form-input" id="rpt_clientes" placeholder="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Calls realizadas</label>
                        <input type="number" class="form-input" id="rpt_calls" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Leads/DMs</label>
                        <input type="number" class="form-input" id="rpt_leads" placeholder="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Contenido publicado</label>
                        <input type="number" class="form-input" id="rpt_contenido" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nuevos seguidores</label>
                        <input type="number" class="form-input" id="rpt_seguidores" placeholder="0">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Notas / Observaciones</label>
                    <textarea class="form-input" id="rpt_notas" placeholder="Qu√© pas√≥ esta semana..."></textarea>
                </div>
                <div style="display:flex;gap:12px;margin-top:24px;">
                    <button type="button" class="btn" onclick="closeModal('reportModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success" style="flex:1;">Enviar Reporte</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal Problema -->
    <div class="modal" id="problemModal">
        <div class="modal-content">
            <div class="modal-title">üö® Reportar Problema</div>
            <form id="problemForm">
                <div class="form-group">
                    <label class="form-label">T√≠tulo del problema</label>
                    <input type="text" class="form-input" id="prob_titulo" placeholder="Ej: No consigo cerrar calls">
                </div>
                <div class="form-group">
                    <label class="form-label">Descripci√≥n</label>
                    <textarea class="form-input" id="prob_desc" placeholder="Explica el problema en detalle..."></textarea>
                </div>
                <div style="display:flex;gap:12px;margin-top:24px;">
                    <button type="button" class="btn" onclick="closeModal('problemModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success" style="flex:1;">Guardar Problema</button>
                </div>
            </form>
        </div>
    </div>

<script>
var data = null;
try { var s = localStorage.getItem('gh_client_data'); if (s) data = JSON.parse(s); } catch(e) {}

var weeklyReports = [];
try { var w = localStorage.getItem('gh_weekly_reports'); if (w) weeklyReports = JSON.parse(w); } catch(e) {}

var problems = [];
try { var p = localStorage.getItem('gh_problems'); if (p) problems = JSON.parse(p); } catch(e) {}

var clientLinks = {drive: '', miro: '', notion: '', fathom: '', calendar: ''};
try { var l = localStorage.getItem('gh_client_links'); if (l) clientLinks = JSON.parse(l); } catch(e) {}

var main = document.getElementById('main');

if (!data || !data.nombre) {
    main.innerHTML = '<div class="empty" style="min-height:80vh;"><h2>Sin datos</h2><p>Completa el onboarding primero</p><a href="index.html" class="btn btn-primary">Ir al Onboarding</a></div>';
} else {
    var firstName = data.nombre.split(' ')[0];
    var initials = data.nombre.split(' ').map(function(n){return n[0]}).join('').toUpperCase().slice(0,2);
    
    var ingresos = parseInt(data.ingresos) || 0;
    var objetivo = parseInt(data.objetivo) || 0;
    
    var totalIngresos = ingresos;
    var totalClientes = parseInt(data.clientes) || 0;
    var totalCalls = 0;
    var totalLeads = 0;
    weeklyReports.forEach(function(r) {
        totalIngresos += parseInt(r.ingresos) || 0;
        totalClientes += parseInt(r.clientes) || 0;
        totalCalls += parseInt(r.calls) || 0;
        totalLeads += parseInt(r.leads) || 0;
    });
    
    var progreso = objetivo > 0 ? Math.round((totalIngresos / objetivo) * 100) : 0;
    var openProblems = problems.filter(function(p){ return p.status === 'open'; }).length;
    
    document.getElementById('avatar').textContent = initials;
    document.getElementById('userName').textContent = data.nombre;
    document.getElementById('userEmail').textContent = data.email;
    
    // History HTML
    var historyHtml = '';
    if (weeklyReports.length === 0) {
        historyHtml = '<div class="empty">A√∫n no hay reportes</div>';
    } else {
        historyHtml = '<div class="week-row" style="font-weight:500;color:#666;font-size:10px;text-transform:uppercase;"><div class="week-date">Fecha</div><div class="week-metric">Ingresos</div><div class="week-metric">Clientes</div><div class="week-metric">Calls</div><div class="week-metric">Leads</div></div>';
        weeklyReports.slice(-10).reverse().forEach(function(r) {
            var d = new Date(r.date);
            historyHtml += '<div class="week-row"><div class="week-date">'+d.getDate()+'/'+(d.getMonth()+1)+'</div><div class="week-metric">‚Ç¨'+(r.ingresos||0)+'</div><div class="week-metric">'+(r.clientes||0)+'</div><div class="week-metric">'+(r.calls||0)+'</div><div class="week-metric">'+(r.leads||0)+'</div></div>';
        });
    }
    
    // Problems HTML
    var problemsHtml = '';
    if (problems.length === 0) {
        problemsHtml = '<div class="empty">No hay problemas registrados</div>';
    } else {
        problems.slice().reverse().forEach(function(p, i) {
            var d = new Date(p.date);
            var statusClass = p.status === 'open' ? 'open' : 'resolved';
            var statusText = p.status === 'open' ? 'Abierto' : 'Resuelto';
            problemsHtml += '<div class="problem"><div class="problem-header"><div class="problem-title">'+p.titulo+'</div><div class="problem-date">'+d.getDate()+'/'+(d.getMonth()+1)+'</div></div><div class="problem-text">'+p.desc+'</div><span class="problem-status '+statusClass+'" onclick="toggleProblem('+(problems.length-1-i)+')">'+statusText+'</span></div>';
        });
    }
    
    // Links HTML
    function linkHtml(icon, title, desc, url, key) {
        if (url) {
            return '<a href="'+url+'" target="_blank" class="link-item"><div class="link-icon">'+icon+'</div><div><div class="link-title">'+title+'</div><div class="link-desc">'+desc+'</div></div></a>';
        }
        return '<div class="link-item" style="opacity:0.5;cursor:default;"><div class="link-icon">'+icon+'</div><div><div class="link-title">'+title+'</div><div class="link-desc">No configurado</div></div></div>';
    }
    
    main.innerHTML = `
        <!-- DASHBOARD -->
        <div class="page active" id="page-dashboard">
            <div class="page-header">
                <div><h1>Dashboard de ${firstName}</h1><p>Semana ${weeklyReports.length + 1}</p></div>
                <button class="btn btn-success" onclick="openModal('reportModal')">üìù Reporte Semanal</button>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Ingresos Totales</div>
                    <div class="stat-value">‚Ç¨${totalIngresos.toLocaleString()}</div>
                    <div class="stat-sub">de ‚Ç¨${objetivo.toLocaleString()} objetivo</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Clientes</div>
                    <div class="stat-value">${totalClientes}</div>
                    <div class="stat-sub">totales</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Calls</div>
                    <div class="stat-value">${totalCalls}</div>
                    <div class="stat-sub">realizadas</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Leads</div>
                    <div class="stat-value">${totalLeads}</div>
                    <div class="stat-sub">recibidos</div>
                </div>
            </div>
            
            <div class="grid">
                <div>
                    <div class="card">
                        <div class="card-title">Progreso al Objetivo</div>
                        <div class="progress-row">
                            <div class="progress-header"><span>‚Ç¨${totalIngresos.toLocaleString()} / ‚Ç¨${objetivo.toLocaleString()}</span><span>${progreso}%</span></div>
                            <div class="progress-bar"><div class="progress-fill" style="width:${Math.min(progreso,100)}%"></div></div>
                        </div>
                        <div style="margin-top:16px;font-size:13px;color:#888;">
                            Faltan <strong style="color:#fff;">‚Ç¨${Math.max(0, objetivo - totalIngresos).toLocaleString()}</strong> para tu objetivo
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">√öltimo Reporte</div>
                        ${weeklyReports.length > 0 ? (function(){
                            var last = weeklyReports[weeklyReports.length-1];
                            var d = new Date(last.date);
                            return '<div style="font-size:13px;"><div style="color:#666;margin-bottom:12px;">'+d.getDate()+'/'+(d.getMonth()+1)+'/'+d.getFullYear()+'</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;"><div>Ingresos: <strong>‚Ç¨'+(last.ingresos||0)+'</strong></div><div>Clientes: <strong>'+(last.clientes||0)+'</strong></div><div>Calls: <strong>'+(last.calls||0)+'</strong></div><div>Leads: <strong>'+(last.leads||0)+'</strong></div></div>'+(last.notas ? '<div style="margin-top:12px;padding-top:12px;border-top:1px solid #1a1a1a;color:#888;">'+last.notas+'</div>' : '')+'</div>';
                        })() : '<div class="empty">No hay reportes a√∫n</div>'}
                    </div>
                </div>
                
                <div>
                    <div class="card">
                        <div class="card-title">Links R√°pidos</div>
                        ${linkHtml('üìÅ', 'Google Drive', 'Documentos compartidos', clientLinks.drive)}
                        ${linkHtml('üé®', 'Miro', 'Tableros y mapas', clientLinks.miro)}
                        ${linkHtml('üé•', 'Fathom', 'Grabaciones de calls', clientLinks.fathom)}
                        ${linkHtml('üìÖ', 'Calendario', 'Agendar call', clientLinks.calendar)}
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Problemas Abiertos (${openProblems})</div>
                        ${openProblems > 0 ? problems.filter(function(p){return p.status==='open';}).slice(0,2).map(function(p){return '<div style="padding:10px 0;border-bottom:1px solid #1a1a1a;font-size:13px;">'+p.titulo+'</div>';}).join('') : '<div style="color:#666;font-size:13px;">Ninguno üëç</div>'}
                        <button class="btn" style="margin-top:12px;width:100%;" onclick="showPage('problemas')">Ver todos</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- HISTORIAL -->
        <div class="page" id="page-metricas">
            <div class="page-header"><div><h1>Historial de M√©tricas</h1><p>Todos tus reportes semanales</p></div></div>
            <div class="card">
                <div class="card-title">Reportes Semanales</div>
                ${historyHtml}
            </div>
        </div>
        
        <!-- REPORTE -->
        <div class="page" id="page-reporte">
            <div class="page-header"><div><h1>Reporte Semanal</h1><p>Actualiza tus m√©tricas</p></div></div>
            <div class="card">
                <p style="color:#888;font-size:13px;margin-bottom:20px;">Env√≠a un reporte cada semana con tus n√∫meros actualizados.</p>
                <button class="btn btn-success" onclick="openModal('reportModal')">üìù Completar Reporte</button>
            </div>
        </div>
        
        <!-- PROBLEMAS -->
        <div class="page" id="page-problemas">
            <div class="page-header">
                <div><h1>Problemas</h1><p>Bloqueos y obst√°culos</p></div>
                <button class="btn btn-success" onclick="openModal('problemModal')">+ Nuevo Problema</button>
            </div>
            <div class="card">
                <div class="card-title">Registro de Problemas</div>
                ${problemsHtml}
            </div>
        </div>
        
        <!-- LINKS -->
        <div class="page" id="page-links">
            <div class="page-header"><div><h1>Mis Links</h1><p>Accesos r√°pidos</p></div></div>
            <div class="card">
                ${linkHtml('üìÅ', 'Google Drive', clientLinks.drive || 'No configurado', clientLinks.drive)}
                ${linkHtml('üé®', 'Miro', clientLinks.miro || 'No configurado', clientLinks.miro)}
                ${linkHtml('üìù', 'Notion', clientLinks.notion || 'No configurado', clientLinks.notion)}
                ${linkHtml('üé•', 'Fathom', clientLinks.fathom || 'No configurado', clientLinks.fathom)}
                ${linkHtml('üìÖ', 'Calendario', clientLinks.calendar || 'No configurado', clientLinks.calendar)}
            </div>
            <p style="color:#666;font-size:12px;margin-top:16px;">Para configurar los links, ve a ‚öôÔ∏è Configurar</p>
        </div>
        
        <!-- CONFIG -->
        <div class="page" id="page-config">
            <div class="page-header"><div><h1>Configuraci√≥n</h1><p>Personaliza tu dashboard</p></div></div>
            <div class="card">
                <div class="card-title">Links Personales</div>
                <div class="config-item">
                    <span style="width:100px;font-size:12px;">üìÅ Drive</span>
                    <input type="url" class="form-input" id="cfg_drive" placeholder="https://drive.google.com/..." value="${clientLinks.drive||''}">
                </div>
                <div class="config-item">
                    <span style="width:100px;font-size:12px;">üé® Miro</span>
                    <input type="url" class="form-input" id="cfg_miro" placeholder="https://miro.com/..." value="${clientLinks.miro||''}">
                </div>
                <div class="config-item">
                    <span style="width:100px;font-size:12px;">üìù Notion</span>
                    <input type="url" class="form-input" id="cfg_notion" placeholder="https://notion.so/..." value="${clientLinks.notion||''}">
                </div>
                <div class="config-item">
                    <span style="width:100px;font-size:12px;">üé• Fathom</span>
                    <input type="url" class="form-input" id="cfg_fathom" placeholder="https://fathom.video/..." value="${clientLinks.fathom||''}">
                </div>
                <div class="config-item">
                    <span style="width:100px;font-size:12px;">üìÖ Calendar</span>
                    <input type="url" class="form-input" id="cfg_calendar" placeholder="https://calendly.com/..." value="${clientLinks.calendar||''}">
                </div>
                <button class="btn btn-primary" style="margin-top:16px;" onclick="saveConfig()">Guardar Configuraci√≥n</button>
            </div>
        </div>
    `;
}

function showPage(page) {
    document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); });
    document.querySelectorAll('.nav-item').forEach(function(n){ n.classList.remove('active'); });
    var el = document.getElementById('page-' + page);
    if(el) el.classList.add('active');
    var navMap = {dashboard:0, metricas:1, reporte:2, problemas:3, links:4, config:5};
    var navItems = document.querySelectorAll('.nav-item');
    if(navItems[navMap[page]]) navItems[navMap[page]].classList.add('active');
}

function openModal(id) { document.getElementById(id).classList.add('active'); }
function closeModal(id) { document.getElementById(id).classList.remove('active'); }

document.getElementById('weeklyForm').onsubmit = function(e) {
    e.preventDefault();
    weeklyReports.push({
        date: new Date().toISOString(),
        ingresos: document.getElementById('rpt_ingresos').value || 0,
        clientes: document.getElementById('rpt_clientes').value || 0,
        calls: document.getElementById('rpt_calls').value || 0,
        leads: document.getElementById('rpt_leads').value || 0,
        contenido: document.getElementById('rpt_contenido').value || 0,
        seguidores: document.getElementById('rpt_seguidores').value || 0,
        notas: document.getElementById('rpt_notas').value
    });
    localStorage.setItem('gh_weekly_reports', JSON.stringify(weeklyReports));
    closeModal('reportModal');
    location.reload();
};

document.getElementById('problemForm').onsubmit = function(e) {
    e.preventDefault();
    problems.push({
        date: new Date().toISOString(),
        titulo: document.getElementById('prob_titulo').value,
        desc: document.getElementById('prob_desc').value,
        status: 'open'
    });
    localStorage.setItem('gh_problems', JSON.stringify(problems));
    closeModal('problemModal');
    location.reload();
};

window.toggleProblem = function(i) {
    problems[i].status = problems[i].status === 'open' ? 'resolved' : 'open';
    localStorage.setItem('gh_problems', JSON.stringify(problems));
    location.reload();
};

window.saveConfig = function() {
    clientLinks = {
        drive: document.getElementById('cfg_drive').value,
        miro: document.getElementById('cfg_miro').value,
        notion: document.getElementById('cfg_notion').value,
        fathom: document.getElementById('cfg_fathom').value,
        calendar: document.getElementById('cfg_calendar').value
    };
    localStorage.setItem('gh_client_links', JSON.stringify(clientLinks));
    alert('Configuraci√≥n guardada');
    location.reload();
};

document.querySelectorAll('.modal').forEach(function(m) {
    m.onclick = function(e) { if(e.target === this) closeModal(this.id); };
});
</script>
</body>
</html>
