<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - GH Consulting</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #000; color: #fff; min-height: 100vh; }
        .app { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 200px; background: #000; border-right: 1px solid #1a1a1a; padding: 24px 16px; position: fixed; height: 100vh; display: flex; flex-direction: column; }
        .logo { font-size: 10px; font-weight: 600; letter-spacing: 2px; color: #666; margin-bottom: 40px; }
        .nav-label { font-size: 10px; font-weight: 500; color: #444; text-transform: uppercase; letter-spacing: 1px; margin: 20px 0 12px; }
        .nav-item { display: block; padding: 10px 12px; color: #666; text-decoration: none; font-size: 13px; cursor: pointer; transition: all 0.15s; border-radius: 4px; margin-bottom: 2px; }
        .nav-item:hover { color: #fff; background: #111; }
        .nav-item.active { color: #fff; background: #111; }
        .nav-item.highlight { color: #4ade80; }
        .sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid #1a1a1a; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-avatar { width: 32px; height: 32px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 500; }
        .user-name { font-size: 12px; font-weight: 500; }
        .user-email { font-size: 10px; color: #666; }
        
        /* Main */
        .main { flex: 1; margin-left: 200px; padding: 32px; max-width: 1200px; }
        
        /* Page Header */
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; padding-bottom: 24px; border-bottom: 1px solid #1a1a1a; }
        .page-header h1 { font-size: 20px; font-weight: 400; }
        .page-header p { color: #666; font-size: 13px; margin-top: 4px; }
        .btn { padding: 10px 16px; font-size: 12px; font-weight: 500; cursor: pointer; border: 1px solid #333; background: transparent; color: #fff; font-family: inherit; transition: all 0.15s; }
        .btn:hover { border-color: #666; }
        .btn-primary { background: #fff; color: #000; border-color: #fff; }
        .btn-primary:hover { background: #eee; }
        .btn-success { background: #4ade80; color: #000; border-color: #4ade80; }
        .header-btns { display: flex; gap: 8px; }
        
        /* Alert Banner */
        .alert { padding: 16px 20px; border: 1px solid #4ade80; background: rgba(74,222,128,0.1); margin-bottom: 24px; display: flex; align-items: center; justify-content: space-between; }
        .alert-text { font-size: 13px; }
        .alert-text strong { color: #4ade80; }
        
        /* Stats Grid */
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
        .stat { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 20px; }
        .stat-label { font-size: 10px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .stat-value { font-size: 28px; font-weight: 300; }
        .stat-sub { font-size: 11px; color: #666; margin-top: 4px; }
        .stat-change { font-size: 11px; margin-top: 4px; }
        .stat-change.up { color: #4ade80; }
        .stat-change.down { color: #f87171; }
        
        /* Cards */
        .grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 24px; }
        .grid-equal { grid-template-columns: 1fr 1fr; }
        .card { border: 1px solid #1a1a1a; padding: 20px; margin-bottom: 20px; background: #0a0a0a; }
        .card-title { font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; }
        .card-title span { color: #888; font-size: 10px; text-transform: none; letter-spacing: 0; }
        
        /* Progress */
        .progress-row { margin-bottom: 20px; }
        .progress-header { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 8px; }
        .progress-header span:last-child { color: #666; }
        .progress-bar { height: 4px; background: #1a1a1a; border-radius: 2px; }
        .progress-fill { height: 100%; background: #fff; border-radius: 2px; transition: width 0.3s; }
        .progress-fill.green { background: #4ade80; }
        
        /* Tasks */
        .task { display: flex; align-items: center; gap: 12px; padding: 14px 0; border-bottom: 1px solid #1a1a1a; cursor: pointer; }
        .task:last-child { border-bottom: none; }
        .task-check { width: 18px; height: 18px; border: 1px solid #444; display: flex; align-items: center; justify-content: center; font-size: 11px; border-radius: 3px; }
        .task.done .task-check { background: #4ade80; border-color: #4ade80; color: #000; }
        .task-text { flex: 1; font-size: 13px; }
        .task.done .task-text { text-decoration: line-through; color: #666; }
        .task-tag { font-size: 9px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; padding: 3px 8px; border: 1px solid #333; border-radius: 3px; }
        .task-tag.urgent { border-color: #f87171; color: #f87171; }
        
        /* Info blocks */
        .info-block { padding: 16px; border: 1px solid #1a1a1a; margin-bottom: 12px; background: #050505; }
        .info-label { font-size: 9px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .info-text { font-size: 13px; color: #ccc; line-height: 1.6; }
        
        /* Weekly History */
        .week-row { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #1a1a1a; font-size: 13px; }
        .week-row:last-child { border-bottom: none; }
        .week-date { width: 100px; color: #666; }
        .week-metric { flex: 1; text-align: center; }
        .week-metric small { display: block; color: #666; font-size: 10px; margin-top: 2px; }
        
        /* Form */
        .form-group { margin-bottom: 20px; }
        .form-label { font-size: 11px; color: #888; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; display: block; }
        .form-input { width: 100%; padding: 12px; background: #111; border: 1px solid #222; color: #fff; font-size: 14px; font-family: inherit; }
        .form-input:focus { outline: none; border-color: #444; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .form-hint { font-size: 11px; color: #666; margin-top: 4px; }
        textarea.form-input { min-height: 80px; resize: vertical; }
        
        /* Resources */
        .resource { display: flex; align-items: center; gap: 12px; padding: 14px; border: 1px solid #1a1a1a; margin-bottom: 8px; cursor: pointer; transition: all 0.15s; }
        .resource:hover { border-color: #333; background: #111; }
        .resource-icon { width: 36px; height: 36px; background: #1a1a1a; display: flex; align-items: center; justify-content: center; font-size: 16px; border-radius: 4px; }
        .resource-info { flex: 1; }
        .resource-title { font-size: 13px; margin-bottom: 2px; }
        .resource-desc { font-size: 11px; color: #666; }
        .resource-tag { font-size: 9px; color: #4ade80; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* Recommendations */
        .rec { padding: 16px; border-left: 3px solid #4ade80; background: #0a0a0a; margin-bottom: 12px; }
        .rec-title { font-size: 13px; font-weight: 500; margin-bottom: 4px; }
        .rec-text { font-size: 12px; color: #888; line-height: 1.5; }
        .rec.warning { border-color: #fbbf24; }
        .rec.info { border-color: #60a5fa; }
        
        /* Page sections */
        .page { display: none; }
        .page.active { display: block; }
        
        /* Roadmap */
        .phase { border: 1px solid #1a1a1a; margin-bottom: 16px; }
        .phase-header { padding: 16px; background: #0a0a0a; display: flex; align-items: center; gap: 12px; cursor: pointer; }
        .phase-num { width: 28px; height: 28px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 12px; border-radius: 4px; }
        .phase-num.complete { background: #4ade80; border-color: #4ade80; color: #000; }
        .phase-num.current { background: #fff; border-color: #fff; color: #000; }
        .phase-info { flex: 1; }
        .phase-title { font-size: 14px; }
        .phase-desc { font-size: 11px; color: #666; margin-top: 2px; }
        .phase-status { font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; padding: 4px 8px; border-radius: 3px; }
        .phase-status.complete { background: rgba(74,222,128,0.2); color: #4ade80; }
        .phase-status.current { background: rgba(255,255,255,0.1); color: #fff; }
        .phase-status.pending { color: #666; }
        
        /* Empty state */
        .empty { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 300px; text-align: center; }
        .empty h2 { font-size: 16px; font-weight: 400; margin-bottom: 8px; }
        .empty p { color: #666; font-size: 13px; margin-bottom: 20px; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 24px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto; }
        .modal-title { font-size: 16px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #1a1a1a; }
        .modal-close { position: absolute; top: 20px; right: 20px; background: none; border: none; color: #666; font-size: 24px; cursor: pointer; }
        
        /* Notification dot */
        .notif-dot { width: 6px; height: 6px; background: #4ade80; border-radius: 50%; display: inline-block; margin-left: 6px; }
        
        @media (max-width: 900px) {
            .stats { grid-template-columns: repeat(2, 1fr); }
            .grid { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; }
        }
        @media (max-width: 600px) {
            .sidebar { display: none; }
            .main { margin-left: 0; padding: 20px; }
            .stats { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <div class="logo">GH CONSULTING</div>
            <div class="nav-label">Principal</div>
            <div class="nav-item active" onclick="showPage('dashboard')">Dashboard</div>
            <div class="nav-item" onclick="showPage('progreso')">Mi Progreso</div>
            <div class="nav-item" onclick="showPage('roadmap')">Roadmap</div>
            <div class="nav-label">Semanal</div>
            <div class="nav-item highlight" onclick="showPage('reporte')">üìù Reporte Semanal<span class="notif-dot" id="reportDot"></span></div>
            <div class="nav-item" onclick="showPage('tareas')">Tareas</div>
            <div class="nav-label">Recursos</div>
            <div class="nav-item" onclick="showPage('recursos')">Clases y Gu√≠as</div>
            <div class="nav-item" onclick="showPage('herramientas')">Herramientas</div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="avatar">--</div>
                    <div>
                        <div class="user-name" id="userName">...</div>
                        <div class="user-email" id="userEmail">...</div>
                    </div>
                </div>
            </div>
        </aside>
        
        <main class="main" id="main"></main>
    </div>
    
    <!-- Modal for weekly report -->
    <div class="modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-title">üìù Reporte Semanal</div>
            <form id="weeklyForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Ingresos esta semana (‚Ç¨)</label>
                        <input type="number" class="form-input" id="rpt_ingresos" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nuevos clientes</label>
                        <input type="number" class="form-input" id="rpt_clientes" placeholder="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Calls realizadas</label>
                        <input type="number" class="form-input" id="rpt_calls" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Leads/DMs recibidos</label>
                        <input type="number" class="form-input" id="rpt_leads" placeholder="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Contenido publicado</label>
                        <input type="number" class="form-input" id="rpt_contenido" placeholder="0">
                        <div class="form-hint">Reels, posts, stories, videos</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nuevos seguidores</label>
                        <input type="number" class="form-input" id="rpt_seguidores" placeholder="0">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">¬øQu√© funcion√≥ bien esta semana?</label>
                    <textarea class="form-input" id="rpt_wins" placeholder="Logros, avances, victorias..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">¬øQu√© problemas encontraste?</label>
                    <textarea class="form-input" id="rpt_problems" placeholder="Bloqueos, dudas, obst√°culos..."></textarea>
                </div>
                <div style="display:flex;gap:12px;margin-top:24px;">
                    <button type="button" class="btn" onclick="closeModal()">Cancelar</button>
                    <button type="submit" class="btn btn-success" style="flex:1;">Enviar Reporte</button>
                </div>
            </form>
        </div>
    </div>

<script>
var data = null;
try { var s = localStorage.getItem('gh_client_data'); if (s) data = JSON.parse(s); } catch(e) {}

// Weekly reports history
var weeklyReports = [];
try { var w = localStorage.getItem('gh_weekly_reports'); if (w) weeklyReports = JSON.parse(w); } catch(e) {}

var main = document.getElementById('main');

if (!data || !data.nombre) {
    main.innerHTML = '<div class="empty" style="min-height:80vh;"><h2>Sin datos</h2><p>Completa el onboarding primero</p><a href="index.html" class="btn btn-primary">Ir al Onboarding</a></div>';
} else {
    var hour = new Date().getHours();
    var greeting = hour < 12 ? 'Buenos d√≠as' : hour < 19 ? 'Buenas tardes' : 'Buenas noches';
    var firstName = data.nombre.split(' ')[0];
    var initials = data.nombre.split(' ').map(function(n){return n[0]}).join('').toUpperCase().slice(0,2);
    
    var ingresos = parseInt(data.ingresos) || 0;
    var objetivo = parseInt(data.objetivo) || 0;
    var clientes = parseInt(data.clientes) || 0;
    var seguidores = parseInt(data.seguidores) || 0;
    var ticket = parseInt(data.ticket) || 0;
    var progreso = objetivo > 0 ? Math.round((ingresos / objetivo) * 100) : 0;
    
    // Calculate totals from weekly reports
    var totalWeeklyIngresos = 0;
    var totalWeeklyClientes = 0;
    var totalWeeklyCalls = 0;
    var totalWeeklyLeads = 0;
    var totalWeeklyContenido = 0;
    weeklyReports.forEach(function(r) {
        totalWeeklyIngresos += parseInt(r.ingresos) || 0;
        totalWeeklyClientes += parseInt(r.clientes) || 0;
        totalWeeklyCalls += parseInt(r.calls) || 0;
        totalWeeklyLeads += parseInt(r.leads) || 0;
        totalWeeklyContenido += parseInt(r.contenido) || 0;
    });
    
    var currentIngresos = ingresos + totalWeeklyIngresos;
    var currentClientes = clientes + totalWeeklyClientes;
    var currentProgreso = objetivo > 0 ? Math.round((currentIngresos / objetivo) * 100) : 0;
    
    // Check if report needed this week
    var lastReport = weeklyReports.length > 0 ? new Date(weeklyReports[weeklyReports.length-1].date) : null;
    var daysSinceReport = lastReport ? Math.floor((new Date() - lastReport) / (1000*60*60*24)) : 999;
    var needsReport = daysSinceReport >= 7;
    
    document.getElementById('avatar').textContent = initials;
    document.getElementById('userName').textContent = data.nombre;
    document.getElementById('userEmail').textContent = data.email;
    if (!needsReport) document.getElementById('reportDot').style.display = 'none';
    
    // Generate recommendations based on data
    var recommendations = [];
    if (currentProgreso < 30) {
        recommendations.push({type:'warning', title:'Acelera tu captaci√≥n', text:'Est√°s al '+currentProgreso+'% de tu objetivo. Enf√≥cate en publicar m√°s contenido y activar DMs.'});
    }
    if (totalWeeklyContenido < 3 && weeklyReports.length > 0) {
        recommendations.push({type:'info', title:'Aumenta tu frecuencia de contenido', text:'Publicar m√≠nimo 5 piezas por semana acelera significativamente los resultados.'});
    }
    if (totalWeeklyCalls > 0 && totalWeeklyClientes === 0) {
        recommendations.push({type:'warning', title:'Revisa tu proceso de cierre', text:'Tienes calls pero no cierras. Revisa tu script y manejo de objeciones.'});
    }
    if (recommendations.length === 0) {
        recommendations.push({type:'success', title:'Vas por buen camino', text:'Mant√©n la consistencia y sigue ejecutando el plan.'});
    }
    
    var recsHtml = recommendations.map(function(r) {
        return '<div class="rec '+r.type+'"><div class="rec-title">'+r.title+'</div><div class="rec-text">'+r.text+'</div></div>';
    }).join('');
    
    // Weekly history HTML
    var historyHtml = '';
    if (weeklyReports.length === 0) {
        historyHtml = '<div class="empty"><p>A√∫n no has enviado reportes semanales</p><button class="btn btn-success" onclick="openModal()">Enviar primer reporte</button></div>';
    } else {
        historyHtml = '<div class="week-row" style="font-weight:500;color:#666;font-size:11px;text-transform:uppercase;"><div class="week-date">Semana</div><div class="week-metric">Ingresos</div><div class="week-metric">Clientes</div><div class="week-metric">Calls</div><div class="week-metric">Leads</div><div class="week-metric">Contenido</div></div>';
        weeklyReports.slice(-8).reverse().forEach(function(r, i) {
            var d = new Date(r.date);
            var dateStr = d.getDate() + '/' + (d.getMonth()+1);
            historyHtml += '<div class="week-row"><div class="week-date">'+dateStr+'</div><div class="week-metric">‚Ç¨'+(r.ingresos||0)+'</div><div class="week-metric">'+(r.clientes||0)+'</div><div class="week-metric">'+(r.calls||0)+'</div><div class="week-metric">'+(r.leads||0)+'</div><div class="week-metric">'+(r.contenido||0)+'</div></div>';
        });
    }
    
    main.innerHTML = `
        <!-- DASHBOARD -->
        <div class="page active" id="page-dashboard">
            <div class="page-header">
                <div><h1>${greeting}, ${firstName}</h1><p>Semana ${weeklyReports.length + 1} de tu programa</p></div>
                <div class="header-btns">
                    <button class="btn btn-success" onclick="openModal()">üìù Reporte Semanal</button>
                </div>
            </div>
            
            ${needsReport ? '<div class="alert"><div class="alert-text"><strong>‚è∞ Toca reporte semanal</strong> ‚Äî Actualiza tus m√©tricas para ver tu progreso real</div><button class="btn btn-success" onclick="openModal()">Enviar ahora</button></div>' : ''}
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Ingresos Acumulados</div>
                    <div class="stat-value">‚Ç¨${currentIngresos.toLocaleString()}</div>
                    <div class="stat-sub">de ‚Ç¨${objetivo.toLocaleString()} objetivo</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Clientes Totales</div>
                    <div class="stat-value">${currentClientes}</div>
                    <div class="stat-change up">${totalWeeklyClientes > 0 ? '+'+totalWeeklyClientes+' nuevos' : 'desde inicio'}</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Calls Realizadas</div>
                    <div class="stat-value">${totalWeeklyCalls}</div>
                    <div class="stat-sub">total del programa</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Contenido Publicado</div>
                    <div class="stat-value">${totalWeeklyContenido}</div>
                    <div class="stat-sub">piezas totales</div>
                </div>
            </div>
            
            <div class="grid">
                <div>
                    <div class="card">
                        <div class="card-title">Progreso al Objetivo<span>${currentProgreso}%</span></div>
                        <div class="progress-row">
                            <div class="progress-header"><span>‚Ç¨${currentIngresos.toLocaleString()} / ‚Ç¨${objetivo.toLocaleString()}</span><span>Meta 90 d√≠as</span></div>
                            <div class="progress-bar"><div class="progress-fill green" style="width:${Math.min(currentProgreso,100)}%"></div></div>
                        </div>
                        <div style="margin-top:20px;padding-top:16px;border-top:1px solid #1a1a1a;">
                            <div style="font-size:12px;color:#666;margin-bottom:8px;">Para alcanzar tu objetivo necesitas:</div>
                            <div style="font-size:20px;font-weight:300;">‚Ç¨${Math.max(0, objetivo - currentIngresos).toLocaleString()}<span style="font-size:12px;color:#666;margin-left:8px;">restantes</span></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Tareas Prioritarias</div>
                        <div id="dashboard-tasks"></div>
                    </div>
                </div>
                
                <div>
                    <div class="card">
                        <div class="card-title">Recomendaciones</div>
                        ${recsHtml}
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Tu Contexto</div>
                        <div class="info-block"><div class="info-label">Objetivo Principal</div><div class="info-text">${data.objetivo_principal || 'No definido'}</div></div>
                        <div class="info-block"><div class="info-label">Problema a Resolver</div><div class="info-text">${data.problema || 'No definido'}</div></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- PROGRESO -->
        <div class="page" id="page-progreso">
            <div class="page-header"><div><h1>Mi Progreso</h1><p>Evoluci√≥n semana a semana</p></div></div>
            <div class="card">
                <div class="card-title">Historial de Reportes</div>
                ${historyHtml}
            </div>
            <div class="grid grid-equal" style="margin-top:20px;">
                <div class="card">
                    <div class="card-title">Resumen del Programa</div>
                    <div class="info-block"><div class="info-label">Semanas completadas</div><div class="info-text" style="font-size:24px;">${weeklyReports.length}</div></div>
                    <div class="info-block"><div class="info-label">Ingresos generados</div><div class="info-text" style="font-size:24px;">‚Ç¨${totalWeeklyIngresos.toLocaleString()}</div></div>
                    <div class="info-block"><div class="info-label">Ratio cierre</div><div class="info-text" style="font-size:24px;">${totalWeeklyCalls > 0 ? Math.round(totalWeeklyClientes/totalWeeklyCalls*100) : 0}%</div></div>
                </div>
                <div class="card">
                    <div class="card-title">Promedios Semanales</div>
                    <div class="info-block"><div class="info-label">Ingresos/semana</div><div class="info-text" style="font-size:24px;">‚Ç¨${weeklyReports.length > 0 ? Math.round(totalWeeklyIngresos/weeklyReports.length).toLocaleString() : 0}</div></div>
                    <div class="info-block"><div class="info-label">Contenido/semana</div><div class="info-text" style="font-size:24px;">${weeklyReports.length > 0 ? Math.round(totalWeeklyContenido/weeklyReports.length) : 0}</div></div>
                    <div class="info-block"><div class="info-label">Leads/semana</div><div class="info-text" style="font-size:24px;">${weeklyReports.length > 0 ? Math.round(totalWeeklyLeads/weeklyReports.length) : 0}</div></div>
                </div>
            </div>
        </div>
        
        <!-- ROADMAP -->
        <div class="page" id="page-roadmap">
            <div class="page-header"><div><h1>Tu Roadmap</h1><p>Plan de 90 d√≠as personalizado</p></div></div>
            <div class="phase">
                <div class="phase-header">
                    <div class="phase-num ${weeklyReports.length >= 2 ? 'complete' : weeklyReports.length >= 0 ? 'current' : ''}">1</div>
                    <div class="phase-info"><div class="phase-title">Fundamentos</div><div class="phase-desc">Oferta, perfil, posicionamiento</div></div>
                    <div class="phase-status ${weeklyReports.length >= 2 ? 'complete' : 'current'}">${weeklyReports.length >= 2 ? 'Completado' : 'En progreso'}</div>
                </div>
            </div>
            <div class="phase">
                <div class="phase-header">
                    <div class="phase-num ${weeklyReports.length >= 5 ? 'complete' : weeklyReports.length >= 2 ? 'current' : ''}">2</div>
                    <div class="phase-info"><div class="phase-title">Contenido y Captaci√≥n</div><div class="phase-desc">Reels, DMs, generaci√≥n de leads</div></div>
                    <div class="phase-status ${weeklyReports.length >= 5 ? 'complete' : weeklyReports.length >= 2 ? 'current' : 'pending'}">${weeklyReports.length >= 5 ? 'Completado' : weeklyReports.length >= 2 ? 'En progreso' : 'Pendiente'}</div>
                </div>
            </div>
            <div class="phase">
                <div class="phase-header">
                    <div class="phase-num ${weeklyReports.length >= 9 ? 'complete' : weeklyReports.length >= 5 ? 'current' : ''}">3</div>
                    <div class="phase-info"><div class="phase-title">Ventas y Cierre</div><div class="phase-desc">Calls, objeciones, conversi√≥n</div></div>
                    <div class="phase-status ${weeklyReports.length >= 9 ? 'complete' : weeklyReports.length >= 5 ? 'current' : 'pending'}">${weeklyReports.length >= 9 ? 'Completado' : weeklyReports.length >= 5 ? 'En progreso' : 'Pendiente'}</div>
                </div>
            </div>
            <div class="phase">
                <div class="phase-header">
                    <div class="phase-num ${weeklyReports.length >= 12 ? 'complete' : weeklyReports.length >= 9 ? 'current' : ''}">4</div>
                    <div class="phase-info"><div class="phase-title">Escala</div><div class="phase-desc">Sistemas, delegaci√≥n, crecimiento</div></div>
                    <div class="phase-status ${weeklyReports.length >= 12 ? 'complete' : weeklyReports.length >= 9 ? 'current' : 'pending'}">${weeklyReports.length >= 12 ? 'Completado' : weeklyReports.length >= 9 ? 'En progreso' : 'Pendiente'}</div>
                </div>
            </div>
        </div>
        
        <!-- REPORTE SEMANAL -->
        <div class="page" id="page-reporte">
            <div class="page-header"><div><h1>Reporte Semanal</h1><p>Actualiza tus m√©tricas cada semana</p></div></div>
            <div class="card">
                <div class="card-title">Enviar Nuevo Reporte</div>
                <p style="color:#888;font-size:13px;margin-bottom:20px;">Completa este formulario cada semana para trackear tu progreso real.</p>
                <button class="btn btn-success" onclick="openModal()">üìù Completar Reporte Semanal</button>
            </div>
            <div class="card" style="margin-top:20px;">
                <div class="card-title">√öltimos Reportes</div>
                ${historyHtml}
            </div>
        </div>
        
        <!-- TAREAS -->
        <div class="page" id="page-tareas">
            <div class="page-header"><div><h1>Tareas</h1><p>Tu checklist semanal</p></div></div>
            <div class="card">
                <div class="card-title">Esta Semana</div>
                <div id="tasks-full"></div>
            </div>
        </div>
        
        <!-- RECURSOS -->
        <div class="page" id="page-recursos">
            <div class="page-header"><div><h1>Clases y Gu√≠as</h1><p>Material del programa</p></div></div>
            <div class="resource" onclick="alert('Pr√≥ximamente disponible')">
                <div class="resource-icon">üìö</div>
                <div class="resource-info"><div class="resource-title">M√≥dulo 1: Construcci√≥n de Oferta</div><div class="resource-desc">Framework completo para crear tu oferta irresistible</div></div>
                <div class="resource-tag">Disponible</div>
            </div>
            <div class="resource" onclick="alert('Pr√≥ximamente disponible')">
                <div class="resource-icon">üì±</div>
                <div class="resource-info"><div class="resource-title">M√≥dulo 2: Perfil que Convierte</div><div class="resource-desc">Optimiza tu Instagram para atraer clientes</div></div>
                <div class="resource-tag">Disponible</div>
            </div>
            <div class="resource" onclick="alert('Pr√≥ximamente disponible')">
                <div class="resource-icon">üé¨</div>
                <div class="resource-info"><div class="resource-title">M√≥dulo 3: Contenido que Vende</div><div class="resource-desc">Sistema de creaci√≥n de reels y videos</div></div>
                <div class="resource-tag">Disponible</div>
            </div>
            <div class="resource" onclick="alert('Pr√≥ximamente disponible')">
                <div class="resource-icon">üí¨</div>
                <div class="resource-info"><div class="resource-title">M√≥dulo 4: Ventas por DM</div><div class="resource-desc">Scripts y frameworks de conversaci√≥n</div></div>
                <div class="resource-tag">Pr√≥ximamente</div>
            </div>
            <div class="resource" onclick="alert('Pr√≥ximamente disponible')">
                <div class="resource-icon">üìû</div>
                <div class="resource-info"><div class="resource-title">M√≥dulo 5: Calls de Cierre</div><div class="resource-desc">Estructura de llamada y manejo de objeciones</div></div>
                <div class="resource-tag">Pr√≥ximamente</div>
            </div>
        </div>
        
        <!-- HERRAMIENTAS -->
        <div class="page" id="page-herramientas">
            <div class="page-header"><div><h1>Herramientas</h1><p>Templates y recursos √∫tiles</p></div></div>
            <div class="resource" onclick="alert('Link pr√≥ximamente')">
                <div class="resource-icon">üìù</div>
                <div class="resource-info"><div class="resource-title">Template de Oferta</div><div class="resource-desc">Google Doc con estructura de oferta</div></div>
            </div>
            <div class="resource" onclick="alert('Link pr√≥ximamente')">
                <div class="resource-icon">üí∞</div>
                <div class="resource-info"><div class="resource-title">Calculadora de Pricing</div><div class="resource-desc">Hoja de c√°lculo para definir precios</div></div>
            </div>
            <div class="resource" onclick="alert('Link pr√≥ximamente')">
                <div class="resource-icon">üìä</div>
                <div class="resource-info"><div class="resource-title">Tracker de M√©tricas</div><div class="resource-desc">Spreadsheet para seguimiento semanal</div></div>
            </div>
            <div class="resource" onclick="alert('Link pr√≥ximamente')">
                <div class="resource-icon">üéØ</div>
                <div class="resource-info"><div class="resource-title">Scripts de DM</div><div class="resource-desc">Mensajes probados para iniciar conversaciones</div></div>
            </div>
            <div class="resource" onclick="alert('Link pr√≥ximamente')">
                <div class="resource-icon">üìÖ</div>
                <div class="resource-info"><div class="resource-title">Calendario de Contenido</div><div class="resource-desc">Planificador semanal de publicaciones</div></div>
            </div>
        </div>
    `;
    
    // Tasks system
    var defaultTasks = [
        {id:1, text:'Publicar m√≠nimo 5 piezas de contenido', priority:'urgent', done:false},
        {id:2, text:'Responder todos los DMs en menos de 2h', priority:'urgent', done:false},
        {id:3, text:'Hacer seguimiento a leads pendientes', priority:'high', done:false},
        {id:4, text:'Revisar y optimizar bio de Instagram', priority:'medium', done:false},
        {id:5, text:'Preparar contenido para pr√≥xima semana', priority:'medium', done:false},
        {id:6, text:'Enviar reporte semanal', priority:'high', done:false}
    ];
    
    var tasks = defaultTasks;
    try { var saved = localStorage.getItem('gh_tasks'); if(saved) tasks = JSON.parse(saved); } catch(e){}
    
    function renderTasks() {
        var dashHtml = '';
        var fullHtml = '';
        var done = 0;
        
        tasks.forEach(function(t, i) {
            if(t.done) done++;
            var cls = t.done ? 'task done' : 'task';
            var check = t.done ? '‚úì' : '';
            var tagCls = t.priority === 'urgent' ? 'task-tag urgent' : 'task-tag';
            var html = '<div class="'+cls+'" onclick="toggleTask('+i+')"><div class="task-check">'+check+'</div><span class="task-text">'+t.text+'</span><span class="'+tagCls+'">'+t.priority+'</span></div>';
            if(i < 4) dashHtml += html;
            fullHtml += html;
        });
        
        document.getElementById('dashboard-tasks').innerHTML = dashHtml;
        document.getElementById('tasks-full').innerHTML = fullHtml;
    }
    
    window.toggleTask = function(i) {
        tasks[i].done = !tasks[i].done;
        localStorage.setItem('gh_tasks', JSON.stringify(tasks));
        renderTasks();
    };
    
    renderTasks();
}

function showPage(page) {
    document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); });
    document.querySelectorAll('.nav-item').forEach(function(n){ n.classList.remove('active'); });
    
    var el = document.getElementById('page-' + page);
    if(el) el.classList.add('active');
    
    var navItems = document.querySelectorAll('.nav-item');
    var navMap = {dashboard:0, progreso:1, roadmap:2, reporte:3, tareas:4, recursos:5, herramientas:6};
    if(navItems[navMap[page]]) navItems[navMap[page]].classList.add('active');
}

function openModal() {
    document.getElementById('reportModal').classList.add('active');
}

function closeModal() {
    document.getElementById('reportModal').classList.remove('active');
}

document.getElementById('weeklyForm').onsubmit = function(e) {
    e.preventDefault();
    
    var report = {
        date: new Date().toISOString(),
        ingresos: document.getElementById('rpt_ingresos').value || 0,
        clientes: document.getElementById('rpt_clientes').value || 0,
        calls: document.getElementById('rpt_calls').value || 0,
        leads: document.getElementById('rpt_leads').value || 0,
        contenido: document.getElementById('rpt_contenido').value || 0,
        seguidores: document.getElementById('rpt_seguidores').value || 0,
        wins: document.getElementById('rpt_wins').value,
        problems: document.getElementById('rpt_problems').value
    };
    
    weeklyReports.push(report);
    localStorage.setItem('gh_weekly_reports', JSON.stringify(weeklyReports));
    
    closeModal();
    alert('¬°Reporte enviado! Recarga la p√°gina para ver tus m√©tricas actualizadas.');
    location.reload();
};

// Close modal on outside click
document.getElementById('reportModal').onclick = function(e) {
    if(e.target === this) closeModal();
};
</script>
</body>
</html>
